@page "/counter"
@using BitMiracle.Docotic.Pdf

@inject IJSRuntime JSRuntime

<button class="btn btn-primary" @onclick="GenerateAndOpenPdf">Generate and Open PDF</button>

@code {

    private async Task GenerateAndOpenPdf()
    {
        var pdfBytes = GeneratePdf();
        var base64String = Convert.ToBase64String(pdfBytes);
        var dataUri = $"data:application/pdf;base64,{base64String}";
        await JSRuntime.InvokeVoidAsync("openInNewTab", dataUri);
    }


    public byte[] GeneratePdf()
    {
        using (var memoryStream = new MemoryStream())
        using (PdfDocument pdf = new PdfDocument())
        {
            pdf.Pages[0].Canvas.DrawString(10, 50, "Hello, world!");
            pdf.Save(memoryStream);
            return memoryStream.ToArray();
        }
    }
    
}